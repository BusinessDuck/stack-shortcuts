!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):(t=t||self,n(t.shortcuts={}))}(this,function(t){"use strict";function n(){const t=window.navigator.userAgent,n=window.navigator.platform,e=["Win32","Win64","Windows","WinCE"],o=["iPhone","iPad","iPod"];return-1!==["Macintosh","MacIntel","MacPPC","Mac68K"].indexOf(n)?"Mac OS":-1!==o.indexOf(n)?"iOS":-1!==e.indexOf(n)?"Windows":/Android/.test(t)?"Android":/Linux/.test(n)?"Linux":"Unknown"}function e(){if(d)return d;const t={};return"Mac OS"!==n()&&(t.CMD="CTRL"),d=t,t}function o(t){return t.map(t=>a[t]).sort().join("")}function i(t){const n=[];return["ctrlKey","metaKey","shiftKey","altKey"].forEach(e=>{t[e]&&n.push(h[e])}),n}function s(t){const n=o([...i(t),l[t.keyCode]]);let e=()=>{};for(let o=0;o<p.length;++o){const i=p[o];i.hasHandler(n)&&(e=i.getHandler(n).bind(null,t,e))}e()}function r(){document.addEventListener("keydown",s)}function c(){document.removeEventListener("keydown",s)}function u(t){if(p.length){const n=p.indexOf(t);if(-1===n)return;p.splice(n,1),p.length||c()}}function f(t){if(!t)throw new Error("Config must be not empty");const n=new y(t);return p.push(n),1===p.length&&r(),{destroy:()=>u(n),manager:n}}const a={BACKSPACE:8,TAB:9,ENTER:13,CMD:91,SHIFT:16,CTRL:17,ALT:18,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,INSERT:45,DELETE:46,0:48,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,ALL:"*"};let d;const h={metaKey:"CMD",ctrlKey:"CTRL",shiftKey:"SHIFT",altKey:"ALT"},l=function(t){const n={};return Object.keys(t).forEach(e=>{Array.isArray(t[e])?t[e].forEach(t=>{n[t]=(n[t]||[]).concat(e)}):n[t[e]]=e}),n}(a),p=[];class y{constructor(t){this._shortcuts={},this.platformKeyMap=e(),Object.keys(t).forEach(n=>{this.add(n,t[n])})}resolveKeyMap(t){return t.map(t=>this.platformKeyMap[t]||t)}add(t,n){const e=o(this.resolveKeyMap(t.toUpperCase().split("+")));this._shortcuts[e]=n}remove(t){const n=o(this.resolveKeyMap(t.toUpperCase().split("+")));delete this._shortcuts[n]}getHandler(t){return this._shortcuts[t]||this._shortcuts[a.ALL]}hasHandler(t){return!!this.getHandler(t)}}"undefined"!=typeof window&&(window.shortcuts=f),t.getHash=o,t.shortcuts=f,t.KeyCode=a,Object.defineProperty(t,"__esModule",{value:!0})});
